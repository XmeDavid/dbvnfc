If you are an agent, don't touch this file

### Overall System Description

The platform is like a customizable adventure game organizer for groups (e.g., scouts events), where teams physically go to different spots ("bases") to solve challenges ("enigmas") and compete or progress. Everything is managed through a web admin panel for setup and oversight, a mobile app for players (and some setup tasks), and a backend that stores and syncs all the data securely on your server. It's built for small events (up to 100 people, one game at a time to start), with built-in rules to make sure teams actually show up and play fair. No one can just sign up randomly—it's all invite-based to keep things controlled.
The target audience for now is Portuguese, but an english version might be needed in the future.

#### Roles and How People Get Involved

- **Admin**: The top bosses of the whole platform. You log in to the web admin panel with your special credentials. Your main job is managing "operators" (the people who run specific games). You can create, edit, or remove operators anytime (full control). To add an operator, you enter their email in the panel, and the system sends them a unique link. They click it to register (set up a password, etc.), and now they're in. You don't deal with the games themselves unless you want to—that's for operators. If something goes wrong (like a data issue), you can check logs or override things. Mostly full CRUD power.
- **Operators (Game Organizers)**: These are the people you invite to run events. Once registered via the email link, they log in to the web admin panel (separate from players). An operator can create a new game or get invited to help with an existing one (e.g., the creator shares a link or code to add co-operators, who all have the same access to that game). Multiple operators can collaborate on one game, like a team of event planners. They don't have access to other operators' games unless invited. All operators in one game have the same privileges.
- **Players (Team Members)**: Regular participants (e.g., scouts) use the mobile app. They don't register an account—they just open the app and enter an "invite code" (provided by operators, like via QR or text). This code ties them directly to a specific team in a specific game. Once in, they're part of that team, and the app shows their role (e.g., if they're the leader). No web access for players—everything happens on their phone.

#### Setting Up a Game (Operator's Workflow)

Operators handle all the prep work in the web admin panel or the mobile app:

- **Game List View**: When an operator logs in, they see a list of games they're part of (or create a new one with a name and basic info).
- **Inside a Game**: The main screen is a map showing all bases as pins (you can zoom, click for details). There's a toggle button to switch to a table view (like a spreadsheet list of bases with columns for name, location, status, for easier editing). In either view, you can edit existing bases or add new ones.
    - **Creating/Editing Bases and Enigmas**: Pick a spot on the map (it grabs the GPS coordinates automatically, but should be adjustable, like move a pin on the map), give it a name, decide if it's "location-dependent" (must be solved there for a physical hint), and assign an enigma if needed. Each base gets a unique code (UUID) generated by the system. The enigmas can be generated together with the base, or independently and linked to a base if location dependent, if not location dependent, at runtime any unfinished enigma can be assigned to that base(even different for different teams).
    - **Rules and Enigmas**: Operators write the game's rules (simple text or rich format with bold/italics/lists). For enigmas, use an easy editor to add text, upload images, or embed videos (e.g., YouTube links). Enigmas can be puzzles, questions, or tasks, or anything else the operator wants, and just contain an answer to complete the base. Answer templates that include team-specific twists (e.g., "correct answer + your team number").
- **Creating Teams**: Operators make teams for the game, giving each a name and a number and generating an invite code. They  the first joiner will become the leader, but the operators can change the leader of the team once the players enter.
- **NFC Tag Setup (Mobile Step)**: Before the game starts, operators switch to the mobile app (logged in as operator). They go to some kind of setup mode for their game, which lists bases that aren't linked yet. For each, they tap a physical NFC tag with their phone to write the base's UUID onto it. Once all bases are linked (app confirms), the game can "go live" (a button in the web panel)—until then, it's locked to prevent starting without setup. A game can only go live if all the bases are linked to a physical nfc tag.
- **Going Live**: Only once the game is live can the teams play. If a player joins before the game is live, it will see a blank screen saying game is not live yet.

#### Playing the Game (Player's Workflow on Mobile App)

- **Joining**: Players download the app, open it, and enter their team's invite code. This assigns them to the team and game—no extra steps.
- **Team View**: See your team members, who's the leader, and overall game rules, bases and current progress.
- **At a Base**: The leader's phone taps the NFC tag (app reads the UUID to confirm it's the right spot). First tap: "Arrived"—app shows the enigma (e.g., a question with text/image/video). Team solves it together (app checks the answer, with the team twist to stop cheating). Once solved, second tap: "Completed"—progress updates, and the team moves on.
    - Fair Play Rules: Only the leader can tap (phone checks device ID). Can't start a new base until the current one's done. App quietly pings your location while solving to confirm you're really there (sent to backend for operators to check later if needed).
    - No Cheating: App blocks screenshots during enigmas (screen goes black if tried).
- **Leader**: There is only one leader per team. The only thing that differs is that the leader is the only that can tap the nfc bases, both for check in and complete, to prevent the team from splitting up and some going to a base, and others to another.
- **Progress**: App shows a map and list of bases with your team's status (e.g., grey not yet, yellow for arrived, green for done). If offline, it saves actions and syncs when back online.
  Will also ping location while using the app, so the operators can see where the teams are.

#### Monitoring During/After the Game (Operator's Workflow)

Operators watch everything in the web admin panel:

- **Dashboard**: Back to the map view, now showing real-time base states (e.g., which teams are there or done—hover for details). Toggle to table for a quick overview.
- **Team Progress**: See each team's journey—who's arrived/completed which bases, scores (if enigmas give points).
- **Location Checks**: Toggle to show teams' last pinged spots on the map (like dots or trails) to verify they're not faking presence.
- **Logs and Overrides**: A log section shows all events (taps, solves, pings). If something's off, operators can pause/reset a team or base.
- **End Game**: Operators can stop the game, declare winners, or export results.